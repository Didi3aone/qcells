function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function commaSeparateNumber(e){for(;/(\d+)(\d{3})/.test(e.toString());)e=e.toString().replace(/(\d+)(\d{3})/,"$1,$2");return e}function check_type(){var e=$("input[name='painttype']:checked").val();1==e?$(".tembok").css("display","block"):$(".tembok").css("display","none")}$.fn.digits=function(){return this.each(function(){$(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))})},calc=function(){check_type();var e="",a="",t={name:"Everglo",spread_rate:12,pack:[2.5,20],unit:"ltr"},r={name:"Supersilk",spread_rate:12,pack:[2.5,20],unit:"ltr"},i={name:"No Odor",spread_rate:12,pack:[2.5,20],unit:"ltr"},n={name:"Avitex Alkali Primer",spread_rate:10,pack:[2.5,20],unit:"ltr"},l={name:"Fres",spread_rate:10,pack:[5,25],unit:"kg"},o={name:"Avitex",spread_rate:10,pack:[5,25],unit:"kg"},p={name:"Sunguard",spread_rate:12,pack:[2.5,20],unit:"ltr"},s={name:"Wood-eco Woodstain",spread_rate:16,pack:[2.5,20],unit:"ltr"},c={name:"Yoko",spread_rate:10,pack:[.7,3.78],unit:"ltr"},u={name:"Avian",spread_rate:10,pack:[.9,3.78],unit:"ltr"},m={name:"Platinum",spread_rate:12,pack:[.9],unit:"ltr"},d={name:"Suzuka Lacquer",spread_rate:8,pack:[1,20],unit:"kg"},b={name:"Belmas Zinc Chromate",spread_rate:8,pack:[1,5,20],unit:"kg"},v={name:"No Drop",spread_rate:2,pack:[1,4,20],unit:"kg"},k={name:"No Drop 100",spread_rate:.8,pack:[2.5],unit:"kg"},h=[t,r,i,n,l,o,p],g=[s,c,m,u],x=[d,c,b,u],f=[v,k];$('input[name="painttype"]').change(function(){check_type()}),$(".tpaintcalc").click(function(){console.log($(".removelikebox").length),$(".removelikebox").length&&($(".removelikebox").data("id",""),$(".removelikebox").addClass("savelikebox"),$(".removelikebox").removeClass("active"),$(".removelikebox").removeClass("removelikebox"));var t=$("input[name='painttype']:checked").val(),r="";e="",a="",r=1==t?"tembok":2==t?"kayu":3==t?"besi":"anti bocor",e="Perkiraan kebutuhan jumlah cat untuk "+r+" dengan spesifikasi: <br /><br />";var i,n=0,l=0,o=0,p=0;$(".number-err").text("");var s=$("#val-hei").val(),c=$("#val-wid").val(),u=$("#val-num").val();if(u&&0!=$.isNumeric(u)&&0!=u||($(".number-err").append("Please enter a valid Number of Surfaces <br/>"),p++),c&&0!=$.isNumeric(c)&&0!=c||($(".number-err").append("Please enter a valid Width number <br/>"),p++),s&&0!=$.isNumeric(s)&&0!=s||($(".number-err").append("Please enter a valid Height number <br/>"),p++),e+="Panjang "+capitalizeFirstLetter(r)+" = "+s+" m <br />",e+="Lebar "+capitalizeFirstLetter(r)+" = "+c+" m <br />",e+="Jumlah "+capitalizeFirstLetter(r)+" = "+u+" <br /><br />",1==t){var m=$("#val-hei-window").val(),d=$("#val-wid-window").val(),b=$("#val-num-window").val(),v=$("#val-hei-door").val(),k=$("#val-wid-door").val(),_=$("#val-num-door").val();m&&1==$.isNumeric(m)&&0!=m&&d&&1==$.isNumeric(d)&&0!=d&&b&&1==$.isNumeric(b)&&0!=b||!b&&!d&&!m?(""==m&&(m=0),""==d&&(d=0),""==b&&(b=0),e+="Panjang Jendela = "+m+" m <br />",e+="Lebar Jendela = "+d+" m <br />",e+="Jumlah Jendela = "+b+" <br /><br />"):($(".number-err").append("Please enter All Window Surface, Width, Height <br/>"),p++),v&&1==$.isNumeric(v)&&0!=v&&k&&1==$.isNumeric(k)&&0!=k&&_&&1==$.isNumeric(_)&&0!=_||!_&&!k&&!v?(""==v&&(v=0),""==k&&(k=0),""==_&&(_=0),e+="Panjang Pintu = "+v+" m <br />",e+="Lebar Pintu = "+k+" m <br />",e+="Jumlah Pintu = "+_+" <br /><br />"):($(".number-err").append("Please enter All Door Surface, Width, Height <br/>"),p++)}if(0==p){n=parseFloat(s*c*u),1==t&&((m&&1==$.isNumeric(m)&&0!=m&&d&&1==$.isNumeric(d)&&0!=d&&b&&1==$.isNumeric(b)&&0!=b||!b&&!d&&!m)&&(l=parseFloat(m*d*b),n-=l),(v&&1==$.isNumeric(v)&&0!=v&&k&&1==$.isNumeric(k)&&0!=k&&_&&1==$.isNumeric(_)&&0!=_||!_&&!k&&!v)&&(o=parseFloat(v*k*_),n-=o)),e+="Luas Bersih : "+n+"m <br />",a="Perkiraan kebutuhan total liter / kg produk beserta rekomendasi jumlah pembelian paling minimumnya: <br/><br />";var N=0;for(i=1==t?h:2==t?g:3==t?x:f,$(".paintcosts").text(""),N=0;N<i.length;N++){var P=i[N],F=P.name,y=P.spread_rate,S=P.unit,C=P.pack,L=parseFloat(n/y),w='<div class="result-subtitle">'+F+" ( "+commaSeparateNumber(L.toFixed(2))+" "+S+")</div>";w+='<div class="result-field">',a+=F+" = "+commaSeparateNumber(L.toFixed(2))+" "+S+" <br/>",a+="Ukuran: <br/>";for(var W=C.length-1,j=0;L>0;){var A=parseFloat(C[W]);L-A>0?(j++,L-=A):L-A==0?(j++,L-=A,w+=j+" x "+A+" "+S,a+=j+" x "+A+" "+S+" <br/>"):0==W?(j++,L-=A,w+=j+" x "+A+" "+S,a+=j+" x "+A+" "+S+" <br/>"):(j>0&&(w+=j+" x "+A+" "+S+" + ",a+=j+" x "+A+" "+S+" + "),j=0,W--)}w+=" </div>",a+="<br/>",$(".paintcosts").append(w)}$("#surfa").text(n),$("#surfa").digits(),$("#surfa").append(" mÂ²"),$(".result").addClass("active"),$(".tpaintcalc").text("Recalculate")}}),$(document).on("click",".savelikebox",function(){""==e||""==a?($("#popup .modal-title").html("Error !!!"),$("#popup .modal-text").html("<p>Please Calculate First.</p>"),$("#popup").addClass("active")):$.ajax({type:"post",url:"/paint-calculator/send",cache:!1,data:{_top:e,_bottom:a},dataType:"json",success:function(e){$("#loading").removeClass("active"),1==e.is_error?($("#popup .modal-title").html(e.data),"Please Login First to Save to Likebox."==e.data?$("#popup .modal-text").html('<p><button class="btn" type="button" onclick="location.href=\'/login\'">Go To Login</button></p>'):$("#popup .modal-text").html(""),$("#popup").addClass("active")):($(this).data("id",e.id),likebox("paint_calc",e.id))},error:function(){$("#loading").removeClass("active"),$("#popup .modal-title").html("Error !!!"),$("#popup .modal-text").html("<p>Something Went Wrong.</p>"),$("#popup").addClass("active")}})}),$(document).on("click",".removelikebox",function(){var e=$(this).data("id");likebox_remove("paint_calc",e)})};